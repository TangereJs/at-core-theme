 /*
 * # Semantic UI - 1.9.0
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,o){e.site=e.fn.site=function(i){var r,a,s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1),f=e.isPlainObject(i)?e.extend(!0,{},e.site.settings,i):e.extend({},e.site.settings),g=f.namespace,m=f.error,p="module-"+g,v=e(n),b=v,h=this,y=b.data(p);return r={initialize:function(){r.instantiate()},instantiate:function(){r.verbose("Storing instance of site",r),y=r,b.data(p,r)},normalize:function(){r.fix.console(),r.fix.requestAnimationFrame()},fix:{console:function(){r.debug("Normalizing window.console"),(console===o||console.log===o)&&(r.verbose("Console not available, normalizing events"),r.disable.console()),("undefined"==typeof console.group||"undefined"==typeof console.groupEnd||"undefined"==typeof console.groupCollapsed)&&(r.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),"undefined"==typeof console.markTimeline&&(r.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){r.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){r.debug("Normalizing requestAnimationFrame"),t.requestAnimationFrame===o&&(r.debug("RequestAnimationFrame not available, normailizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return e.fn[t]!==o&&e.fn[t].settings!==o},enabled:{modules:function(t){var n=[];return t=t||f.modules,e.each(t,function(e,t){r.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||f.modules,e.each(t,function(e,t){r.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,i,a){i="string"==typeof i?"all"===i?f.modules:[i]:i||f.modules,a=a!==o?a:!0,e.each(i,function(o,i){var s,c=r.moduleExists(i)?e.fn[i].settings.namespace||!1:!0;r.moduleExists(i)&&(r.verbose("Changing default setting",t,n,i),e.fn[i].settings[t]=n,a&&c&&(s=e(":data(module-"+c+")"),s.length>0&&(r.verbose("Modifying existing settings",s),s[i]("setting",t,n))))})},settings:function(t,n,i){n="string"==typeof n?[n]:n||f.modules,i=i!==o?i:!0,e.each(n,function(n,o){var a;r.moduleExists(o)&&(r.verbose("Changing default setting",t,o),e.extend(!0,e.fn[o].settings,t),i&&g&&(a=e(":data(module-"+g+")"),a.length>0&&(r.verbose("Modifying existing settings",a),a[o]("setting",t))))})}},enable:{console:function(){r.console(!0)},debug:function(e,t){e=e||f.modules,r.debug("Enabling debug for modules",e),r.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||f.modules,r.debug("Enabling verbose debug for modules",e),r.change.setting("verbose",!0,e,t)}},disable:{console:function(){r.console(!1)},debug:function(e,t){e=e||f.modules,r.debug("Disabling debug for modules",e),r.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||f.modules,r.debug("Disabling verbose debug for modules",e),r.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(y.cache.console===o)return void r.error(m.console);r.debug("Restoring console function"),t.console=y.cache.console}else r.debug("Disabling console function"),y.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){r.verbose("Destroying previous site for",b),b.removeData(p)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===o)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(n===o)return r[t];r[t]=n}},debug:function(){f.debug&&(f.performance?r.performance.log(arguments):(r.debug=Function.prototype.bind.call(console.info,console,f.name+":"),r.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?r.performance.log(arguments):(r.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),r.verbose.apply(console,arguments)))},error:function(){r.error=Function.prototype.bind.call(console.error,console,f.name+":"),r.error.apply(console,arguments)},performance:{log:function(e){var t,n,o;f.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,c.push({Element:h,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(r.performance.timer),r.performance.timer=setTimeout(r.performance.display,100)},display:function(){var t=f.name+":",n=0;s=!1,clearTimeout(r.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,c,l,u=y;return n=n||d,i=h||i,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var a=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[a])&&n!=s)u=u[a];else{if(u[a]!==o)return c=u[a],!1;if(!e.isPlainObject(u[i])||n==s)return u[i]!==o?(c=u[i],!1):(r.error(m.method,t),!1);u=u[i]}})),e.isFunction(c)?l=c.apply(i,n):c!==o&&(l=c),e.isArray(a)?a.push(l):a!==o?a=[a,l]:l!==o&&(a=l),c}},u?(y===o&&r.initialize(),r.invoke(l)):(y!==o&&r.destroy(),r.initialize()),a!==o?a:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!0,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","video","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,o){return!!e.data(t,o[3])}})}(jQuery,window,document),function(e,t,n,o){e.fn.form=function(t,i){var r,a=e(this),s=e.extend(!0,{},e.fn.form.settings,i),c=e.extend({},e.fn.form.settings.defaults,t),l=s.namespace,u=s.metadata,d=s.selector,f=s.className,g=(s.error,"."+l),m="module-"+l,p=a.selector||"",v=(new Date).getTime(),b=[],h=arguments[0],y="string"==typeof h,x=[].slice.call(arguments,1);return a.each(function(){var t,i=e(this),l=e(this).find(d.field),k=e(this).find(d.group),C=e(this).find(d.message),w=(e(this).find(d.prompt),e(this).find(d.submit)),T=e(this).find(d.clear),P=e(this).find(d.reset),E=[],R=!1,A=this,D=i.data(m);t={initialize:function(){t.verbose("Initializing form validation",i,c,s),t.bindEvents(),t.set.defaults(),t.instantiate()},instantiate:function(){t.verbose("Storing instance of module",t),D=t,i.data(m,t)},destroy:function(){t.verbose("Destroying previous module",D),t.removeEvents(),i.removeData(m)},refresh:function(){t.verbose("Refreshing selector cache"),l=i.find(d.field)},submit:function(){t.verbose("Submitting form",i),i.submit()},attachEvents:function(n,o){o=o||"submit",e(n).on("click",function(e){t[o](),e.preventDefault()})},bindEvents:function(){s.keyboardShortcuts&&l.on("keydown"+g,t.event.field.keydown),i.on("submit"+g,t.validate.form),l.on("blur"+g,t.event.field.blur),t.attachEvents(w,"submit"),t.attachEvents(P,"reset"),t.attachEvents(T,"clear"),l.each(function(){var n=e(this).prop("type"),o=t.get.changeEvent(n);e(this).on(o+g,t.event.field.change)})},clear:function(){l.each(function(){var n=e(this),o=n.parent(),i=n.closest(k),r=i.find(d.prompt),a=n.data(u.defaultValue)||"",s=o.is(d.uiCheckbox),c=o.is(d.uiDropdown),l=i.hasClass(f.error);l&&(t.verbose("Resetting error on field",i),i.removeClass(f.error),r.remove()),c?(t.verbose("Resetting dropdown value",o,a),o.dropdown("clear")):s?o.checkbox("uncheck"):(t.verbose("Resetting field value",n,a),n.val(""))})},reset:function(){l.each(function(){var n=e(this),o=n.parent(),i=n.closest(k),r=i.find(d.prompt),a=n.data(u.defaultValue)||"",s=o.is(d.uiCheckbox),c=o.is(d.uiDropdown),l=i.hasClass(f.error);l&&(t.verbose("Resetting error on field",i),i.removeClass(f.error),r.remove()),c?(t.verbose("Resetting dropdown value",o,a),o.dropdown("restore defaults")):s?(t.verbose("Resetting checkbox value",o,a),o.checkbox(a===!0?"check":"uncheck")):(t.verbose("Resetting field value",n,a),n.val(a))})},removeEvents:function(){i.off(g),l.off(g),w.off(g),l.off(g)},event:{field:{keydown:function(n){var o=e(this),i=n.which,r={enter:13,escape:27};i==r.escape&&(t.verbose("Escape key pressed blurring field"),o.blur()),!n.ctrlKey&&i==r.enter&&o.is(d.input)&&o.not(d.checkbox).length>0&&(w.addClass(f.pressed),R||(o.one("keyup"+g,t.event.field.keyup),t.submit(),t.debug("Enter pressed on input submitting form")),R=!0)},keyup:function(){R=!1,w.removeClass(f.pressed)},blur:function(){var n=e(this),o=n.closest(k);o.hasClass(f.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):("blur"==s.on||"change"==s.on)&&t.validate.field(t.get.validation(n))},change:function(){var n=e(this),o=n.closest(k);("change"==s.on||o.hasClass(f.error)&&s.revalidate)&&(clearTimeout(t.timer),t.timer=setTimeout(function(){t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))},s.delay))}}},get:{changeEvent:function(e){return"checkbox"==e||"radio"==e||"hidden"==e?"change":t.get.inputEvent()},inputEvent:function(){return n.createElement("input").oninput!==o?"input":n.createElement("input").onpropertychange!==o?"propertychange":"keyup"},field:function(n){return t.verbose("Finding field with identifier",n),l.filter("#"+n).length>0?l.filter("#"+n):l.filter('[name="'+n+'"]').length>0?l.filter('[name="'+n+'"]'):l.filter("[data-"+u.validate+'="'+n+'"]').length>0?l.filter("[data-"+u.validate+'="'+n+'"]'):e("<input/>")},validation:function(n){var o;return e.each(c,function(e,i){t.get.field(i.identifier).get(0)==n.get(0)&&(o=i)}),o||!1},value:function(e){var n,o=[];return o.push(e),n=t.get.values.call(A,o),n[e]},values:function(n){var o={};return e.isArray(n)||(n=l),e.each(n,function(n,i){var r="string"==typeof i?t.get.field(i):e(i),a=(r.prop("type"),r.prop("name")),s=r.val(),c=r.is(d.checkbox),l=r.is(d.radio),u=c?r.is(":checked"):!1;if(a)if(l)u&&(o[a]=s);else if(c){if(!u)return t.debug("Omitted unchecked checkbox",r),!0;o[a]=!0}else o[a]=s}),o}},has:{field:function(e){return t.verbose("Checking for existence of a field with identifier",e),l.filter("#"+e).length>0?!0:l.filter('[name="'+e+'"]').length>0?!0:l.filter("[data-"+u.validate+'="'+e+'"]').length>0?!0:!1}},add:{prompt:function(n,r){var a=t.get.field(n),c=a.closest(k),l=c.children(d.prompt),u=0!==l.length;r="string"==typeof r?[r]:r,t.verbose("Adding field error state",n),c.addClass(f.error),s.inline&&(u||(l=s.templates.prompt(r),l.appendTo(c)),l.html(r[0]),u?t.verbose("Inline errors are disabled, no inline error added",n):s.transition&&e.fn.transition!==o&&i.transition("is supported")?(t.verbose("Displaying error with css transition",s.transition),l.transition(s.transition+" in",s.duration)):(t.verbose("Displaying error with fallback javascript animation"),l.fadeIn(s.duration)))},errors:function(e){t.debug("Adding form error messages",e),C.html(s.templates.error(e))}},remove:{prompt:function(n){var r=t.get.field(n.identifier),a=r.closest(k),c=a.children(d.prompt);a.removeClass(f.error),s.inline&&c.is(":visible")&&(t.verbose("Removing prompt for field",n),s.transition&&e.fn.transition!==o&&i.transition("is supported")?c.transition(s.transition+" out",s.duration,function(){c.remove()}):c.fadeOut(s.duration,function(){c.remove()}))}},set:{success:function(){i.removeClass(f.error).addClass(f.success)},defaults:function(){l.each(function(){var t=e(this),n=t.filter(d.checkbox).length>0,o=n?t.is(":checked"):t.val();t.data(u.defaultValue,o)})},error:function(){i.removeClass(f.success).addClass(f.error)},value:function(e,n){var o={};return o[e]=n,t.set.values.call(A,o)},values:function(n){e.isEmptyObject(n)||(e.each(n,function(e,n){var o=t.get.field(e),i=o.parent(),r=i.is(d.uiCheckbox),a=i.is(d.uiDropdown),s=o.is(d.radio),c=o.length>0;c&&(s&&r?(t.verbose("Selecting radio value",n,o),o.filter('[value="'+n+'"]').parent(d.uiCheckbox).checkbox("check")):r?(t.verbose("Setting checkbox value",n,i),i.checkbox(n===!0?"check":"uncheck")):a?(t.verbose("Setting dropdown value",n,i),i.dropdown("set selected",n)):(t.verbose("Setting field value",n,o),o.val(n)))}),t.validate.form())}},validate:{form:function(n){var r=!0;return R?!1:(E=[],e.each(c,function(e,n){t.validate.field(n)||(r=!1)}),r?(t.debug("Form has no validation errors, submitting"),t.set.success(),s.onSuccess.call(A,n)):(t.debug("Form has errors"),t.set.error(),s.inline||t.add.errors(E),i.data("moduleApi")!==o&&n.stopImmediatePropagation(),s.onFailure.call(A,E)))},field:function(n){var i=t.get.field(n.identifier),r=!0,a=[];return i.prop("disabled")?(t.debug("Field is disabled. Skipping",n.identifier),r=!0):n.optional&&""===e.trim(i.val())?(t.debug("Field is optional and empty. Skipping",n.identifier),r=!0):n.rules!==o&&e.each(n.rules,function(e,o){t.has.field(n.identifier)&&!t.validate.rule(n,o)&&(t.debug("Field is invalid",n.identifier,o.type),a.push(o.prompt),r=!1)}),r?(t.remove.prompt(n,a),s.onValid.call(i),!0):(E=E.concat(a),t.add.prompt(n.identifier,a),s.onInvalid.call(i,a),!1)},rule:function(n,i){var r,a,c=t.get.field(n.identifier),l=i.type,u=e.trim(c.val()+""),d=/\[(.*)\]/i,f=d.exec(l),g=!0;return f!==o&&null!==f?(r=""+f[1],a=l.replace(f[0],""),g=s.rules[a].call(A,u,r)):g=s.rules[l].call(c,u),g}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===o)return s[t];s[t]=n}},internal:function(n,i){if(e.isPlainObject(n))e.extend(!0,t,n);else{if(i===o)return t[n];t[n]=i}},debug:function(){s.debug&&(s.performance?t.performance.log(arguments):(t.debug=Function.prototype.bind.call(console.info,console,s.name+":"),t.debug.apply(console,arguments)))},verbose:function(){s.verbose&&s.debug&&(s.performance?t.performance.log(arguments):(t.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),t.verbose.apply(console,arguments)))},error:function(){t.error=Function.prototype.bind.call(console.error,console,s.name+":"),t.error.apply(console,arguments)},performance:{log:function(e){var n,o,i;s.performance&&(n=(new Date).getTime(),i=v||n,o=n-i,v=n,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":o})),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,100)},display:function(){var n=s.name+":",i=0;v=!1,clearTimeout(t.performance.timer),e.each(b,function(e,t){i+=t["Execution Time"]}),n+=" "+i+"ms",p&&(n+=" '"+p+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==o||console.table!==o)&&b.length>0&&(console.groupCollapsed(n),console.table?console.table(b):e.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(t,n,i){var a,s,c,l=D;return n=n||x,i=A||i,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var r=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[r])&&n!=a)l=l[r];else{if(l[r]!==o)return s=l[r],!1;if(!e.isPlainObject(l[i])||n==a)return l[i]!==o?(s=l[i],!1):!1;l=l[i]}})),e.isFunction(s)?c=s.apply(i,n):s!==o&&(c=s),e.isArray(r)?r.push(c):r!==o?r=[r,c]:c!==o&&(r=c),s}},y?(D===o&&t.initialize(),t.invoke(h)):(D!==o&&D.invoke("destroy"),t.initialize())}),r!==o?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!0,performance:!0,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:".reset",submit:".submit",uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{method:"The method you called is not defined."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui red pointing prompt label").html(t[0])}},rules:{checked:function(){return e(this).filter(":checked").length>0},contains:function(e,t){return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),-1!==e.search(t)},email:function(e){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","i");return t.test(e)},empty:function(e){return!(e===o||""===e)},integer:function(e,t){var n,i,r,a=/^\-?\d+$/;return t===o||""===t||".."===t||(-1==t.indexOf("..")?a.test(t)&&(n=i=t-0):(r=t.split("..",2),a.test(r[0])&&(n=r[0]-0),a.test(r[1])&&(i=r[1]-0))),a.test(e)&&(n===o||e>=n)&&(i===o||i>=e)},is:function(e,t){return e==t},length:function(e,t){return e!==o?e.length>=t:!1},match:function(t,n){var i,r=e(this);return r.find("#"+n).length>0?i=r.find("#"+n).val():r.find('[name="'+n+'"]').length>0?i=r.find('[name="'+n+'"]').val():r.find('[data-validate="'+n+'"]').length>0&&(i=r.find('[data-validate="'+n+'"]').val()),i!==o?t.toString()==i.toString():!1},maxLength:function(e,t){return e!==o?e.length<=t:!1},not:function(e,t){return e!=t},url:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}}}}(jQuery,window,document),function(e,t,n,o){"use strict";e.fn.checkbox=function(n){var i,r=e(this),a=r.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return r.each(function(){var r,f,g=e.extend(!0,{},e.fn.checkbox.settings,n),m=g.className,p=g.namespace,v=g.selector,b=g.error,h="."+p,y="module-"+p,x=e(this),k=e(this).find(v.label).first(),C=e(this).find(v.input),w=x.data(y),T=this;f={initialize:function(){f.verbose("Initializing checkbox",g),f.create.label(),f.add.events(),f.is.checked()?(f.set.checked(),g.fireOnInit&&g.onChecked.call(C.get())):(f.remove.checked(),g.fireOnInit&&g.onUnchecked.call(C.get())),f.observeChanges(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),w=f,x.data(y,f)},destroy:function(){f.verbose("Destroying module"),f.remove.events(),x.removeData(y)},refresh:function(){x=e(this),k=e(this).find(v.label).first(),C=e(this).find(v.input)},observeChanges:function(){"MutationObserver"in t&&(r=new MutationObserver(function(){f.debug("DOM tree modified, updating selector cache"),f.refresh()}),r.observe(T,{childList:!0,subtree:!0}),f.debug("Setting up mutation observer",r))},attachEvents:function(t,n){var o=e(t);n=e.isFunction(f[n])?f[n]:f.toggle,o.length>0?(f.debug("Attaching checkbox events to element",t,n),o.on("click"+h,n)):f.error(b.notFound)},event:{keydown:function(e){var t=e.which,n={enter:13,space:32,escape:27};t==n.escape&&(f.verbose("Escape key pressed blurring field"),x.blur()),e.ctrlKey||t!=n.enter&&t!=n.space||(f.verbose("Enter key pressed, toggling checkbox"),f.toggle.call(this),e.preventDefault())}},is:{radio:function(){return x.hasClass(m.radio)},checked:function(){return C.prop("checked")!==o&&C.prop("checked")},unchecked:function(){return!f.is.checked()}},can:{change:function(){return!(x.hasClass(m.disabled)||x.hasClass(m.readOnly)||C.prop("disabled"))},uncheck:function(){return"boolean"==typeof g.uncheckable?g.uncheckable:!f.is.radio()}},set:{checked:function(){x.addClass(m.checked)},tab:function(){C.attr("tabindex")===o&&C.attr("tabindex",0)}},create:{label:function(){C.prevAll(v.label).length>0?(C.prev(v.label).detach().insertAfter(C),f.debug("Moving existing label",k)):f.has.label()||(k=e("<label>").insertAfter(C),f.debug("Creating label",k))}},has:{label:function(){return k.length>0}},add:{events:function(){f.verbose("Attaching checkbox events"),x.on("click"+h,f.toggle).on("keydown"+h,v.input,f.event.keydown)}},remove:{checked:function(){x.removeClass(m.checked)},events:function(){f.debug("Removing events"),x.off(h).removeData(y),C.off(h,f.event.keydown),k.off(h)}},enable:function(){f.debug("Enabling checkbox functionality"),x.removeClass(m.disabled),C.prop("disabled",!1),g.onEnabled.call(C.get())},disable:function(){f.debug("Disabling checkbox functionality"),x.addClass(m.disabled),C.prop("disabled","disabled"),g.onDisabled.call(C.get())},check:function(){f.debug("Enabling checkbox",C),C.prop("checked",!0).trigger("change"),f.set.checked(),g.onChange.call(C.get()),g.onChecked.call(C.get())},uncheck:function(){f.debug("Disabling checkbox"),C.prop("checked",!1).trigger("change"),f.remove.checked(),g.onChange.call(C.get()),g.onUnchecked.call(C.get())},toggle:function(){return f.can.change()?(f.verbose("Determining new checkbox state"),void(f.is.unchecked()?f.check():f.is.checked()&&f.can.uncheck()&&f.uncheck())):(console.log(f.can.change()),void f.debug("Checkbox is read-only or disabled, ignoring toggle"))},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===o)return f[t];f[t]=n}},debug:function(){g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,100)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(f.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,r){var a,s,c,l=w;return n=n||d,r=T||r,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var r=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[r])&&n!=a)l=l[r];else{if(l[r]!==o)return s=l[r],!1;if(!e.isPlainObject(l[i])||n==a)return l[i]!==o?(s=l[i],!1):(f.error(b.method,t),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(r,n):s!==o&&(c=s),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),s}},u?(w===o&&f.initialize(),f.invoke(l)):(w!==o&&w.invoke("destroy"),f.initialize())}),i!==o?i:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!0,onChange:function(){},onChecked:function(){},onUnchecked:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",disabled:"disabled",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{input:'input[type="checkbox"], input[type="radio"]',label:"label"}}}(jQuery,window,document),function(e,t,n,o){e.api=e.fn.api=function(n){var i,r=e(e.isFunction(this)?t:this),a=r.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return r.each(function(){var t,r,f,g,m,p=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),v=p.namespace,b=p.metadata,h=p.selector,y=p.error,x=p.className,k="."+v,C="module-"+v,w=e(this),T=w.closest(h.form),P=p.stateContext?e(p.stateContext):w,E=this,R=P.get(),A=w.data(C);m={initialize:function(){var e=m.get.event();u||(e?(m.debug("Attaching API events to element",e),w.on(e+k,m.event.trigger)):"now"==p.on&&(m.debug("Querying API now",e),m.query())),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),A=m,w.data(C,A)},destroy:function(){m.verbose("Destroying previous module for",E),w.removeData(C).off(k)},query:function(){if(m.is.disabled())return void m.debug("Element is disabled API request aborted");if(m.is.loading()&&0===p.throttle)return void m.debug("Cancelling request, previous request is still pending");if(p.defaultData&&e.extend(!0,p.urlData,m.get.defaultData()),(p.serializeForm!==!1||P.is("form"))&&("json"==p.serializeForm?e.extend(!0,p.data,m.get.formData()):p.data=m.get.formData()),r=m.get.settings(),r===!1)return void m.error(y.beforeSend);if(p.url?(m.debug("Using specified url",f),f=m.add.urlData(p.url)):(f=m.add.urlData(m.get.templateURL()),m.debug("Added URL Data to url",f)),!f){if(!w.is("form"))return void m.error(y.missingURL,p.action);m.debug("No url or action specified, defaulting to form action"),f=w.attr("action")}m.set.loading(),t=e.extend(!0,{},p,{type:p.method||p.type,data:g,url:p.base+f,beforeSend:p.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),m.verbose("Creating AJAX request with settings",t),m.is.loading()?m.timer=setTimeout(function(){m.request=m.create.request(),m.xhr=m.create.xhr(),p.onRequest.call(R,m.request,m.xhr)},p.throttle):(m.request=m.create.request(),m.xhr=m.create.xhr(),p.onRequest.call(R,m.request,m.xhr))},is:{disabled:function(){return w.filter(p.filter).length>0},loading:function(){return m.request&&"pending"==m.request.state()}},was:{succesful:function(){return m.request&&"resolved"==m.request.state()},failure:function(){return m.request&&"rejected"==m.request.state()},complete:function(){return m.request&&("resolved"==m.request.state()||"rejected"==m.request.state())}},add:{urlData:function(t,n){var i,r;return t&&(i=t.match(p.regExp.required),r=t.match(p.regExp.optional),n=n||p.urlData,i&&(m.debug("Looking for required URL variables",i),e.each(i,function(i,r){var a=-1!==r.indexOf("$")?r.substr(2,r.length-3):r.substr(1,r.length-2),s=e.isPlainObject(n)&&n[a]!==o?n[a]:w.data(a)!==o?w.data(a):P.data(a)!==o?P.data(a):n[a];return s===o?(m.error(y.requiredParameter,a,t),t=!1,!1):(m.verbose("Found required variable",a,s),void(t=t.replace(r,s)))})),r&&(m.debug("Looking for optional URL variables",i),e.each(r,function(i,r){var a=-1!==r.indexOf("$")?r.substr(3,r.length-4):r.substr(2,r.length-3),s=e.isPlainObject(n)&&n[a]!==o?n[a]:w.data(a)!==o?w.data(a):P.data(a)!==o?P.data(a):n[a];s!==o?(m.verbose("Optional variable Found",a,s),t=t.replace(r,s)):(m.verbose("Optional variable not found",a),t=-1!==t.indexOf("/"+r)?t.replace("/"+r,""):t.replace(r,""))}))),t}},event:{trigger:function(e){m.query(),("submit"==e.type||"click"==e.type)&&e.preventDefault()},xhr:{always:function(){},done:function(e){var t=this,n=(new Date).getTime()-s,o=p.loadingDuration-n;o=o>0?o:0,setTimeout(function(){m.request.resolveWith(t,[e])},o)},fail:function(e,t,n){var o=this,i=(new Date).getTime()-s,r=p.loadingDuration-i;r=r>0?r:0,setTimeout(function(){"abort"!==t?m.request.rejectWith(o,[e,t,n]):m.reset()},r)}},request:{complete:function(e){m.remove.loading(),p.onComplete.call(R,e,w)},done:function(t){m.debug("API Response Received",t),"json"==p.dataType&&e.isFunction(p.successTest)?(m.debug("Checking JSON returned success",p.successTest,t),p.successTest(t)?p.onSuccess.call(R,t,w):(m.debug("JSON test specified by user and response failed",t),p.onFailure.call(R,t,w))):p.onSuccess.call(R,t,w)},error:function(t,n,i){var r,a=p.error[n]!==o?p.error[n]:i;if(t!==o)if(t.readyState!==o&&4==t.readyState){if(200!=t.status&&i!==o&&""!==i)m.error(y.statusMessage+i);else if("error"==n&&"json"==p.dataType)try{r=e.parseJSON(t.responseText),r&&r.error!==o&&(a=r.error)}catch(s){m.error(y.JSONParse)}m.remove.loading(),m.set.error(),p.errorDuration&&setTimeout(m.remove.error,p.errorDuration),m.debug("API Request error:",a),p.onError.call(R,a,w)}else p.onAbort.call(R,a,w),m.debug("Request Aborted (Most likely caused by page change or CORS Policy)",n,i)}}},create:{request:function(){return e.Deferred().always(m.event.request.complete).done(m.event.request.done).fail(m.event.request.error)},xhr:function(){return e.ajax(t).always(m.event.xhr.always).done(m.event.xhr.done).fail(m.event.xhr.fail)}},set:{error:function(){m.verbose("Adding error state to element",P),P.addClass(x.error)},loading:function(){m.verbose("Adding loading state to element",P),P.addClass(x.loading)}},remove:{error:function(){m.verbose("Removing error state from element",P),P.removeClass(x.error)},loading:function(){m.verbose("Removing loading state from element",P),P.removeClass(x.loading)}},get:{request:function(){return m.request||!1},xhr:function(){return m.xhr||!1},settings:function(){var e;return e=p.beforeSend.call(w,p),e&&(e.success!==o&&(m.debug("Legacy success callback detected",e),m.error(y.legacyParameters,e.success),e.onSuccess=e.success),e.failure!==o&&(m.debug("Legacy failure callback detected",e),m.error(y.legacyParameters,e.failure),e.onFailure=e.failure),e.complete!==o&&(m.debug("Legacy complete callback detected",e),m.error(y.legacyParameters,e.complete),e.onComplete=e.complete)),e===o&&m.error(y.noReturnedValue),e!==o?e:p},defaultData:function(){var t={};return e.isWindow(E)||(w.is("input")?t.value=w.val():w.is("form")||(t.text=w.text())),t},event:function(){return e.isWindow(E)||"now"==p.on?(m.debug("API called without element, no events attached"),!1):"auto"==p.on?w.is("input")?E.oninput!==o?"input":E.onpropertychange!==o?"propertychange":"keyup":w.is("form")?"submit":"click":p.on},formData:function(){var t;return e(this).serializeObject()!==o?t=T.serializeObject():(m.error(y.missingSerialize),t=T.serialize()),m.debug("Retrieved form data",t),t},templateURL:function(e){var t;return e=e||w.data(b.action)||p.action||!1,e&&(m.debug("Looking up url for action",e,p.api),p.api[e]!==o?(t=p.api[e],m.debug("Found template url",t)):m.error(y.missingAction,p.action,p.api)),t}},abort:function(){var e=m.get.xhr();e&&"resolved"!==e.state()&&(m.debug("Cancelling API request"),e.abort(),m.request.rejectWith(p.apiSettings))},reset:function(){m.remove.error(),m.remove.loading()},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===o)return m[t];m[t]=n}},debug:function(){p.debug&&(p.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,p.name+":"),m.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,p.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,o;p.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,100)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,r){var a,s,c,l=A;return n=n||d,r=E||r,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var r=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;
if(e.isPlainObject(l[r])&&n!=a)l=l[r];else{if(l[r]!==o)return s=l[r],!1;if(!e.isPlainObject(l[i])||n==a)return l[i]!==o?(s=l[i],!1):(m.error(y.method,t),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(r,n):s!==o&&(c=s),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),s}},u?(A===o&&m.initialize(),m.invoke(l)):(A!==o&&A.invoke("destroy"),m.initialize())}),i!==o?i:this},e.api.settings={name:"API",namespace:"api",debug:!0,verbose:!0,performance:!0,on:"auto",filter:".disabled",stateContext:!1,loadingDuration:0,errorDuration:2e3,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,method:"get",data:{},dataType:"json",beforeSend:function(e){return e},beforeXHR:function(){},onRequest:function(){},onSuccess:function(){},onComplete:function(){},onFailure:function(){},onError:function(){},onAbort:function(){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"Required dependency jquery-serialize-object missing, using basic serialize",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{form:"form"},metadata:{action:"action"}},e.api.settings.api={}}(jQuery,window,document),function(e,t,n,o){e.fn.form=function(t,i){var r,a=e(this),s=e.extend(!0,{},e.fn.form.settings,i),c=e.extend({},e.fn.form.settings.defaults,t),l=s.namespace,u=s.metadata,d=s.selector,f=s.className,g=(s.error,"."+l),m="module-"+l,p=a.selector||"",v=(new Date).getTime(),b=[],h=arguments[0],y="string"==typeof h,x=[].slice.call(arguments,1);return a.each(function(){var t,i=e(this),l=e(this).find(d.field),k=e(this).find(d.group),C=e(this).find(d.message),w=(e(this).find(d.prompt),e(this).find(d.submit)),T=e(this).find(d.clear),P=e(this).find(d.reset),E=[],R=!1,A=this,D=i.data(m);t={initialize:function(){t.verbose("Initializing form validation",i,c,s),t.bindEvents(),t.set.defaults(),t.instantiate()},instantiate:function(){t.verbose("Storing instance of module",t),D=t,i.data(m,t)},destroy:function(){t.verbose("Destroying previous module",D),t.removeEvents(),i.removeData(m)},refresh:function(){t.verbose("Refreshing selector cache"),l=i.find(d.field)},submit:function(){t.verbose("Submitting form",i),i.submit()},attachEvents:function(n,o){o=o||"submit",e(n).on("click",function(e){t[o](),e.preventDefault()})},bindEvents:function(){s.keyboardShortcuts&&l.on("keydown"+g,t.event.field.keydown),i.on("submit"+g,t.validate.form),l.on("blur"+g,t.event.field.blur),t.attachEvents(w,"submit"),t.attachEvents(P,"reset"),t.attachEvents(T,"clear"),l.each(function(){var n=e(this).prop("type"),o=t.get.changeEvent(n);e(this).on(o+g,t.event.field.change)})},clear:function(){l.each(function(){var n=e(this),o=n.parent(),i=n.closest(k),r=i.find(d.prompt),a=n.data(u.defaultValue)||"",s=o.is(d.uiCheckbox),c=o.is(d.uiDropdown),l=i.hasClass(f.error);l&&(t.verbose("Resetting error on field",i),i.removeClass(f.error),r.remove()),c?(t.verbose("Resetting dropdown value",o,a),o.dropdown("clear")):s?o.checkbox("uncheck"):(t.verbose("Resetting field value",n,a),n.val(""))})},reset:function(){l.each(function(){var n=e(this),o=n.parent(),i=n.closest(k),r=i.find(d.prompt),a=n.data(u.defaultValue)||"",s=o.is(d.uiCheckbox),c=o.is(d.uiDropdown),l=i.hasClass(f.error);l&&(t.verbose("Resetting error on field",i),i.removeClass(f.error),r.remove()),c?(t.verbose("Resetting dropdown value",o,a),o.dropdown("restore defaults")):s?(t.verbose("Resetting checkbox value",o,a),o.checkbox(a===!0?"check":"uncheck")):(t.verbose("Resetting field value",n,a),n.val(a))})},removeEvents:function(){i.off(g),l.off(g),w.off(g),l.off(g)},event:{field:{keydown:function(n){var o=e(this),i=n.which,r={enter:13,escape:27};i==r.escape&&(t.verbose("Escape key pressed blurring field"),o.blur()),!n.ctrlKey&&i==r.enter&&o.is(d.input)&&o.not(d.checkbox).length>0&&(w.addClass(f.pressed),R||(o.one("keyup"+g,t.event.field.keyup),t.submit(),t.debug("Enter pressed on input submitting form")),R=!0)},keyup:function(){R=!1,w.removeClass(f.pressed)},blur:function(){var n=e(this),o=n.closest(k);o.hasClass(f.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):("blur"==s.on||"change"==s.on)&&t.validate.field(t.get.validation(n))},change:function(){var n=e(this),o=n.closest(k);("change"==s.on||o.hasClass(f.error)&&s.revalidate)&&(clearTimeout(t.timer),t.timer=setTimeout(function(){t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))},s.delay))}}},get:{changeEvent:function(e){return"checkbox"==e||"radio"==e||"hidden"==e?"change":t.get.inputEvent()},inputEvent:function(){return n.createElement("input").oninput!==o?"input":n.createElement("input").onpropertychange!==o?"propertychange":"keyup"},field:function(n){return t.verbose("Finding field with identifier",n),l.filter("#"+n).length>0?l.filter("#"+n):l.filter('[name="'+n+'"]').length>0?l.filter('[name="'+n+'"]'):l.filter("[data-"+u.validate+'="'+n+'"]').length>0?l.filter("[data-"+u.validate+'="'+n+'"]'):e("<input/>")},validation:function(n){var o;return e.each(c,function(e,i){t.get.field(i.identifier).get(0)==n.get(0)&&(o=i)}),o||!1},value:function(e){var n,o=[];return o.push(e),n=t.get.values.call(A,o),n[e]},values:function(n){var o={};return e.isArray(n)||(n=l),e.each(n,function(n,i){var r="string"==typeof i?t.get.field(i):e(i),a=(r.prop("type"),r.prop("name")),s=r.val(),c=r.is(d.checkbox),l=r.is(d.radio),u=c?r.is(":checked"):!1;if(a)if(l)u&&(o[a]=s);else if(c){if(!u)return t.debug("Omitted unchecked checkbox",r),!0;o[a]=!0}else o[a]=s}),o}},has:{field:function(e){return t.verbose("Checking for existence of a field with identifier",e),l.filter("#"+e).length>0?!0:l.filter('[name="'+e+'"]').length>0?!0:l.filter("[data-"+u.validate+'="'+e+'"]').length>0?!0:!1}},add:{prompt:function(n,r){var a=t.get.field(n),c=a.closest(k),l=c.children(d.prompt),u=0!==l.length;r="string"==typeof r?[r]:r,t.verbose("Adding field error state",n),c.addClass(f.error),s.inline&&(u||(l=s.templates.prompt(r),l.appendTo(c)),l.html(r[0]),u?t.verbose("Inline errors are disabled, no inline error added",n):s.transition&&e.fn.transition!==o&&i.transition("is supported")?(t.verbose("Displaying error with css transition",s.transition),l.transition(s.transition+" in",s.duration)):(t.verbose("Displaying error with fallback javascript animation"),l.fadeIn(s.duration)))},errors:function(e){t.debug("Adding form error messages",e),C.html(s.templates.error(e))}},remove:{prompt:function(n){var r=t.get.field(n.identifier),a=r.closest(k),c=a.children(d.prompt);a.removeClass(f.error),s.inline&&c.is(":visible")&&(t.verbose("Removing prompt for field",n),s.transition&&e.fn.transition!==o&&i.transition("is supported")?c.transition(s.transition+" out",s.duration,function(){c.remove()}):c.fadeOut(s.duration,function(){c.remove()}))}},set:{success:function(){i.removeClass(f.error).addClass(f.success)},defaults:function(){l.each(function(){var t=e(this),n=t.filter(d.checkbox).length>0,o=n?t.is(":checked"):t.val();t.data(u.defaultValue,o)})},error:function(){i.removeClass(f.success).addClass(f.error)},value:function(e,n){var o={};return o[e]=n,t.set.values.call(A,o)},values:function(n){e.isEmptyObject(n)||(e.each(n,function(e,n){var o=t.get.field(e),i=o.parent(),r=i.is(d.uiCheckbox),a=i.is(d.uiDropdown),s=o.is(d.radio),c=o.length>0;c&&(s&&r?(t.verbose("Selecting radio value",n,o),o.filter('[value="'+n+'"]').parent(d.uiCheckbox).checkbox("check")):r?(t.verbose("Setting checkbox value",n,i),i.checkbox(n===!0?"check":"uncheck")):a?(t.verbose("Setting dropdown value",n,i),i.dropdown("set selected",n)):(t.verbose("Setting field value",n,o),o.val(n)))}),t.validate.form())}},validate:{form:function(n){var r=!0;return R?!1:(E=[],e.each(c,function(e,n){t.validate.field(n)||(r=!1)}),r?(t.debug("Form has no validation errors, submitting"),t.set.success(),s.onSuccess.call(A,n)):(t.debug("Form has errors"),t.set.error(),s.inline||t.add.errors(E),i.data("moduleApi")!==o&&n.stopImmediatePropagation(),s.onFailure.call(A,E)))},field:function(n){var i=t.get.field(n.identifier),r=!0,a=[];return i.prop("disabled")?(t.debug("Field is disabled. Skipping",n.identifier),r=!0):n.optional&&""===e.trim(i.val())?(t.debug("Field is optional and empty. Skipping",n.identifier),r=!0):n.rules!==o&&e.each(n.rules,function(e,o){t.has.field(n.identifier)&&!t.validate.rule(n,o)&&(t.debug("Field is invalid",n.identifier,o.type),a.push(o.prompt),r=!1)}),r?(t.remove.prompt(n,a),s.onValid.call(i),!0):(E=E.concat(a),t.add.prompt(n.identifier,a),s.onInvalid.call(i,a),!1)},rule:function(n,i){var r,a,c=t.get.field(n.identifier),l=i.type,u=e.trim(c.val()+""),d=/\[(.*)\]/i,f=d.exec(l),g=!0;return f!==o&&null!==f?(r=""+f[1],a=l.replace(f[0],""),g=s.rules[a].call(A,u,r)):g=s.rules[l].call(c,u),g}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===o)return s[t];s[t]=n}},internal:function(n,i){if(e.isPlainObject(n))e.extend(!0,t,n);else{if(i===o)return t[n];t[n]=i}},debug:function(){s.debug&&(s.performance?t.performance.log(arguments):(t.debug=Function.prototype.bind.call(console.info,console,s.name+":"),t.debug.apply(console,arguments)))},verbose:function(){s.verbose&&s.debug&&(s.performance?t.performance.log(arguments):(t.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),t.verbose.apply(console,arguments)))},error:function(){t.error=Function.prototype.bind.call(console.error,console,s.name+":"),t.error.apply(console,arguments)},performance:{log:function(e){var n,o,i;s.performance&&(n=(new Date).getTime(),i=v||n,o=n-i,v=n,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":o})),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,100)},display:function(){var n=s.name+":",i=0;v=!1,clearTimeout(t.performance.timer),e.each(b,function(e,t){i+=t["Execution Time"]}),n+=" "+i+"ms",p&&(n+=" '"+p+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==o||console.table!==o)&&b.length>0&&(console.groupCollapsed(n),console.table?console.table(b):e.each(b,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(t,n,i){var a,s,c,l=D;return n=n||x,i=A||i,"string"==typeof t&&l!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var r=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[r])&&n!=a)l=l[r];else{if(l[r]!==o)return s=l[r],!1;if(!e.isPlainObject(l[i])||n==a)return l[i]!==o?(s=l[i],!1):!1;l=l[i]}})),e.isFunction(s)?c=s.apply(i,n):s!==o&&(c=s),e.isArray(r)?r.push(c):r!==o?r=[r,c]:c!==o&&(r=c),s}},y?(D===o&&t.initialize(),t.invoke(h)):(D!==o&&D.invoke("destroy"),t.initialize())}),r!==o?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!0,performance:!0,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:".reset",submit:".submit",uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{method:"The method you called is not defined."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui red pointing prompt label").html(t[0])}},rules:{checked:function(){return e(this).filter(":checked").length>0},contains:function(e,t){return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),-1!==e.search(t)},email:function(e){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","i");return t.test(e)},empty:function(e){return!(e===o||""===e)},integer:function(e,t){var n,i,r,a=/^\-?\d+$/;return t===o||""===t||".."===t||(-1==t.indexOf("..")?a.test(t)&&(n=i=t-0):(r=t.split("..",2),a.test(r[0])&&(n=r[0]-0),a.test(r[1])&&(i=r[1]-0))),a.test(e)&&(n===o||e>=n)&&(i===o||i>=e)},is:function(e,t){return e==t},length:function(e,t){return e!==o?e.length>=t:!1},match:function(t,n){var i,r=e(this);return r.find("#"+n).length>0?i=r.find("#"+n).val():r.find('[name="'+n+'"]').length>0?i=r.find('[name="'+n+'"]').val():r.find('[data-validate="'+n+'"]').length>0&&(i=r.find('[data-validate="'+n+'"]').val()),i!==o?t.toString()==i.toString():!1},maxLength:function(e,t){return e!==o?e.length<=t:!1},not:function(e,t){return e!=t},url:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}}}}(jQuery,window,document),function(e,t,n,o){e.fn.state=function(t){var i,r=e(this),a=r.selector||"",s=("ontouchstart"in n.documentElement,(new Date).getTime()),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return r.each(function(){var n,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),g=f.error,m=f.metadata,p=f.className,v=f.namespace,b=f.states,h=f.text,y="."+v,x=v+"-module",k=e(this),C=this,w=k.data(x);n={initialize:function(){n.verbose("Initializing module"),f.automatic&&n.add.defaults(),f.context&&""!==a?e(f.context).on(a,"mouseenter"+y,n.change.text).on(a,"mouseleave"+y,n.reset.text).on(a,"click"+y,n.toggle.state):k.on("mouseenter"+y,n.change.text).on("mouseleave"+y,n.reset.text).on("click"+y,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),w=n,k.data(x,n)},destroy:function(){n.verbose("Destroying previous module",w),k.off(y).removeData(x)},refresh:function(){n.verbose("Refreshing selector cache"),k=e(C)},add:{defaults:function(){var i=t&&e.isPlainObject(t.states)?t.states:{};e.each(f.defaults,function(t,r){n.is[t]!==o&&n.is[t]()&&(n.verbose("Adding default states",t,C),e.extend(f.states,r,i))})}},is:{active:function(){return k.hasClass(p.active)},loading:function(){return k.hasClass(p.loading)},inactive:function(){return!k.hasClass(p.active)},state:function(e){return p[e]===o?!1:k.hasClass(p[e])},enabled:function(){return!k.is(f.filter.active)},disabled:function(){return k.is(f.filter.active)},textEnabled:function(){return!k.is(f.filter.text)},button:function(){return k.is(".button:not(a, .submit)")},input:function(){return k.is("input")},progress:function(){return k.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),b[e]=!0},disallow:function(e){n.debug("No longer allowing",e),b[e]=!1},allows:function(e){return b[e]||!1},enable:function(){k.removeClass(p.disabled)},disable:function(){k.addClass(p.disabled)},setState:function(e){n.allows(e)&&k.addClass(p[e])},removeState:function(e){n.allows(e)&&k.removeClass(p[e])},toggle:{state:function(){var t;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),e.fn.api!==o&&(t=k.api("get request")))return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t?(h.loading&&n.update.text(h.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),f.activateTest=function(){return!0},f.deactivateTest=function(){return!0}):(n.debug("API request failed"),f.activateTest=function(){return!1},f.deactivateTest=function(){return!1}),n.change.state()})):(f.activateTest=function(){return!1},f.deactivateTest=function(){return!1})},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),f.sync&&n.sync(),f.onChange.call(C)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",h.hover),n.update.text(h.disabled)):n.is.active()?h.hover?(n.verbose("Changing text to hover text",h.hover),n.update.text(h.hover)):h.deactivate&&(n.verbose("Changing text to deactivating text",h.deactivate),n.update.text(h.deactivate)):h.hover?(n.verbose("Changing text to hover text",h.hover),n.update.text(h.hover)):h.activate&&(n.verbose("Changing text to activating text",h.activate),n.update.text(h.activate)))}},activate:function(){f.activateTest.call(C)&&(n.debug("Setting state to active"),k.addClass(p.active),n.update.text(h.active),f.onActivate.call(C))},deactivate:function(){f.deactivateTest.call(C)&&(n.debug("Setting state to inactive"),k.removeClass(p.active),n.update.text(h.inactive),f.onDeactivate.call(C))},sync:function(){n.verbose("Syncing other buttons to current state"),r.not(k).state(n.is.active()?"activate":"deactivate")},get:{text:function(){return f.selector.text?k.find(f.selector.text).text():k.html()},textFor:function(e){return h[e]||!1}},flash:{text:function(e,t,o){var i=n.get.text();n.debug("Flashing text message",e,t),e=e||f.text.flash,t=t||f.flashDuration,o=o||function(){},n.update.text(e),setTimeout(function(){n.update.text(i),o.call(C)},t)}},reset:{text:function(){var e=h.active||k.data(m.storedText),t=h.inactive||k.data(m.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),f.selector.text?k.data(m.storedText,e).find(f.selector.text).text(e):k.data(m.storedText,e).html(e)):n.debug("Text is already sane, ignoring update",e)}},setting:function(t,i){if(n.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,f,t);else{if(i===o)return f[t];f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(i===o)return n[t];n[t]=i}},debug:function(){f.debug&&(f.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,f.name+":"),n.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,f.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,o,i;f.performance&&(t=(new Date).getTime(),i=s||t,o=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":o})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var t=f.name+":",i=0;s=!1,clearTimeout(n.performance.timer),e.each(c,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,r,a){var s,c,l,u=w;return r=r||d,a=C||a,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(i,r){var a=i!=s?r+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(u[a])&&i!=s)u=u[a];else{if(u[a]!==o)return c=u[a],!1;if(!e.isPlainObject(u[r])||i==s)return u[r]!==o?(c=u[r],!1):(n.error(g.method,t),!1);u=u[r]}})),e.isFunction(c)?l=c.apply(a,r):c!==o&&(l=c),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),c}},u?(w===o&&n.initialize(),n.invoke(l)):(w!==o&&w.invoke("destroy"),n.initialize())}),i!==o?i:this},e.fn.state.settings={name:"State",debug:!1,verbose:!0,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document),function(e,t,n,o){e.fn.visibility=function(i){var r,a=e(this),s=a.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,f=[].slice.call(arguments,1);return a.each(function(){var a,g=e.extend(!0,{},e.fn.visibility.settings,i),m=g.className,p=g.namespace,v=g.error,b="."+p,h="module-"+p,y=e(t),x=e(this),k=e(g.context),C=(x.offsetParent(),x.selector||"",x.data(h)),w=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},T=this;a={initialize:function(){a.verbose("Initializing visibility",g),a.setup.cache(),a.save.position(),a.should.trackChanges()&&(a.bindEvents(),"image"==g.type&&a.setup.image(),"fixed"==g.type&&a.setup.fixed()),a.checkVisibility(),a.instantiate()},instantiate:function(){a.verbose("Storing instance of module",a),C=a,x.data(h,a)},destroy:function(){a.verbose("Destroying previous module"),x.off(b).removeData(h)},bindEvents:function(){a.verbose("Binding visibility events to scroll and resize"),y.on("resize"+b,a.event.refresh),k.on("scroll"+b,a.event.scroll)},event:{refresh:function(){w(a.refresh)},scroll:function(){a.verbose("Scroll position changed"),g.throttle?(clearTimeout(a.timer),a.timer=setTimeout(a.checkVisibility,g.throttle)):w(a.checkVisibility)}},precache:function(t,o){t instanceof Array||(t=[t]);for(var i=t.length,r=0,a=[],s=n.createElement("img"),c=function(){r++,r>=t.length&&e.isFunction(o)&&o()};i--;)s=n.createElement("img"),s.onload=c,s.onerror=c,s.src=t[i],a.push(s)},should:{trackChanges:function(){return d&&f.length>0?(a.debug("One time query, no need to bind events"),!1):(a.debug("Query is attaching callbacks, watching for changes with scroll"),!0)}},setup:{cache:function(){a.cache={occurred:{},screen:{},element:{}}},image:function(){var e=x.data("src");e&&(a.verbose("Lazy loading image",e),a.topVisible(function(){a.precache(e,function(){a.set.image(e),g.onTopVisible=!1})}))},fixed:function(){a.verbose("Setting up fixed on element pass"),x.visibility({once:!1,continuous:!1,onTopPassed:function(){x.addClass(m.fixed).css({position:"fixed",top:g.offset+"px"}),g.animation&&e.fn.transition!==o&&x.transition(g.transition,g.duration)},onTopPassedReverse:function(){x.removeClass(m.fixed).css({position:"",top:""})}})}},set:{image:function(t){var n=a.cache.screen.bottom<a.cache.element.top;x.attr("src",t),n?(a.verbose("Image outside browser, no show animation"),x.show()):g.transition&&e.fn.transition!==o?x.transition(g.transition,g.duration):x.fadeIn(g.duration)}},refresh:function(){a.debug("Refreshing constants (element width/height)"),a.reset(),a.save.position(),a.checkVisibility(),g.onRefresh.call(T)},reset:function(){a.verbose("Reseting all cached values"),e.isPlainObject(a.cache)&&(a.cache.screen={},a.cache.element={})},checkVisibility:function(){a.verbose("Checking visibility of element",a.cache.element),a.save.calculations(),a.passed(),a.passingReverse(),a.topVisibleReverse(),a.bottomVisibleReverse(),a.topPassedReverse(),a.bottomPassedReverse(),a.passing(),a.topVisible(),a.bottomVisible(),a.topPassed(),a.bottomPassed()},passed:function(t,n){var i=a.get.elementCalculations();if(t!==o&&n!==o)g.onPassed[t]=n;else{if(t!==o)return a.get.pixelsPassed(t)>i.pixelsPassed;i.passing&&e.each(g.onPassed,function(e,t){i.bottomVisible||i.pixelsPassed>a.get.pixelsPassed(e)?a.execute(t,e):g.once||a.remove.occurred(t)})}},passing:function(e){var t=a.get.elementCalculations(),n=e||g.onPassing,i="passing";return e&&(a.debug("Adding callback for passing",e),g.onPassing=e),t.passing?a.execute(n,i):g.once||a.remove.occurred(i),e!==o?t.passing:void 0},topVisible:function(e){var t=a.get.elementCalculations(),n=e||g.onTopVisible,i="topVisible";return e&&(a.debug("Adding callback for top visible",e),g.onTopVisible=e),t.topVisible?a.execute(n,i):g.once||a.remove.occurred(i),e===o?t.topVisible:void 0},bottomVisible:function(e){var t=a.get.elementCalculations(),n=e||g.onBottomVisible,i="bottomVisible";return e&&(a.debug("Adding callback for bottom visible",e),g.onBottomVisible=e),t.bottomVisible?a.execute(n,i):g.once||a.remove.occurred(i),e===o?t.bottomVisible:void 0},topPassed:function(e){var t=a.get.elementCalculations(),n=e||g.onTopPassed,i="topPassed";return e&&(a.debug("Adding callback for top passed",e),g.onTopPassed=e),t.topPassed?a.execute(n,i):g.once||a.remove.occurred(i),e===o?t.topPassed:void 0},bottomPassed:function(e){var t=a.get.elementCalculations(),n=e||g.onBottomPassed,i="bottomPassed";return e&&(a.debug("Adding callback for bottom passed",e),g.onBottomPassed=e),t.bottomPassed?a.execute(n,i):g.once||a.remove.occurred(i),e===o?t.bottomPassed:void 0},passingReverse:function(e){var t=a.get.elementCalculations(),n=e||g.onPassingReverse,i="passingReverse";return e&&(a.debug("Adding callback for passing reverse",e),g.onPassingReverse=e),t.passing?g.once||a.remove.occurred(i):a.get.occurred("passing")&&a.execute(n,i),e!==o?!t.passing:void 0},topVisibleReverse:function(e){var t=a.get.elementCalculations(),n=e||g.onTopVisibleReverse,i="topVisibleReverse";return e&&(a.debug("Adding callback for top visible reverse",e),g.onTopVisibleReverse=e),t.topVisible?g.once||a.remove.occurred(i):a.get.occurred("topVisible")&&a.execute(n,i),e===o?!t.topVisible:void 0},bottomVisibleReverse:function(e){var t=a.get.elementCalculations(),n=e||g.onBottomVisibleReverse,i="bottomVisibleReverse";return e&&(a.debug("Adding callback for bottom visible reverse",e),g.onBottomVisibleReverse=e),t.bottomVisible?g.once||a.remove.occurred(i):a.get.occurred("bottomVisible")&&a.execute(n,i),e===o?!t.bottomVisible:void 0},topPassedReverse:function(e){var t=a.get.elementCalculations(),n=e||g.onTopPassedReverse,i="topPassedReverse";return e&&(a.debug("Adding callback for top passed reverse",e),g.onTopPassedReverse=e),t.topPassed?g.once||a.remove.occurred(i):a.get.occurred("topPassed")&&a.execute(n,i),e===o?!t.onTopPassed:void 0},bottomPassedReverse:function(e){var t=a.get.elementCalculations(),n=e||g.onBottomPassedReverse,i="bottomPassedReverse";return e&&(a.debug("Adding callback for bottom passed reverse",e),g.onBottomPassedReverse=e),t.bottomPassed?g.once||a.remove.occurred(i):a.get.occurred("bottomPassed")&&a.execute(n,i),e===o?!t.bottomPassed:void 0},execute:function(e,t){var n=a.get.elementCalculations(),o=a.get.screenCalculations();e=e||!1,e&&(g.continuous?(a.debug("Callback being called continuously",t,n),e.call(T,n,o)):a.get.occurred(t)||(a.debug("Conditions met",t,n),e.call(T,n,o))),a.save.occurred(t)},remove:{occurred:function(e){e?a.cache.occurred[e]!==o&&a.cache.occurred[e]===!0&&(a.debug("Callback can now be called again",e),a.cache.occurred[e]=!1):a.cache.occurred={}}},save:{calculations:function(){a.verbose("Saving all calculations necessary to determine positioning"),a.save.scroll(),a.save.direction(),a.save.screenCalculations(),a.save.elementCalculations()},occurred:function(e){e&&(a.cache.occurred[e]===o||a.cache.occurred[e]!==!0)&&(a.verbose("Saving callback occurred",e),a.cache.occurred[e]=!0)},scroll:function(){a.cache.scroll=k.scrollTop()+g.offset},direction:function(){var e,t=a.get.scroll(),n=a.get.lastScroll();return e=t>n&&n?"down":n>t&&n?"up":"static",a.cache.direction=e,a.cache.direction},elementPosition:function(){var t=a.get.screenSize();return a.verbose("Saving element position"),e.extend(a.cache.element,{margin:{top:parseInt(x.css("margin-top"),10),bottom:parseInt(x.css("margin-bottom"),10)},fits:T.height<t.height,offset:x.offset(),width:x.outerWidth(),height:x.outerHeight()}),a.cache.element},elementCalculations:function(){var t=a.get.screenCalculations(),n=a.get.elementPosition();g.includeMargin?e.extend(a.cache.element,{top:n.offset.top-n.margin.top,bottom:n.offset.top+n.height+n.margin.bottom}):e.extend(a.cache.element,{top:n.offset.top,bottom:n.offset.top+n.height}),e.extend(a.cache.element,{topVisible:t.bottom>=n.top,topPassed:t.top>=n.top,bottomVisible:t.bottom>=n.bottom,bottomPassed:t.top>=n.bottom,pixelsPassed:0,percentagePassed:0}),e.extend(a.cache.element,{visible:a.cache.element.topVisible||a.cache.element.bottomVisible,passing:a.cache.element.topPassed&&!a.cache.element.bottomPassed,hidden:!a.cache.element.topVisible&&!a.cache.element.bottomVisible}),a.cache.element.passing&&(a.cache.element.pixelsPassed=t.top-n.top,a.cache.element.percentagePassed=(t.top-n.top)/n.height),a.verbose("Updated element calculations",a.cache.element)},screenCalculations:function(){var t=k.scrollTop()+g.offset;return a.cache.scroll===o&&(a.cache.scroll=k.scrollTop()+g.offset),a.save.direction(),e.extend(a.cache.screen,{top:t,bottom:t+a.cache.screen.height}),a.cache.screen},screenSize:function(){a.verbose("Saving window position"),a.cache.screen={height:k.height()}},position:function(){a.save.screenSize(),a.save.elementPosition()}},get:{pixelsPassed:function(e){var t=a.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return a.cache.occurred!==o?a.cache.occurred[e]||!1:!1},direction:function(){return a.cache.direction===o&&a.save.direction(),a.cache.direction},elementPosition:function(){return a.cache.element===o&&a.save.elementPosition(),a.cache.element},elementCalculations:function(){return a.cache.element===o&&a.save.elementCalculations(),a.cache.element},screenCalculations:function(){return a.cache.screen===o&&a.save.screenCalculations(),a.cache.screen},screenSize:function(){return a.cache.screen===o&&a.save.screenSize(),a.cache.screen},scroll:function(){return a.cache.scroll===o&&a.save.scroll(),a.cache.scroll},lastScroll:function(){return a.cache.screen===o?(a.debug("First scroll event, no last scroll could be found"),!1):a.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(n===o)return a[t];a[t]=n}},debug:function(){g.debug&&(g.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,g.name+":"),a.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),a.verbose.apply(console,arguments)))},error:function(){a.error=Function.prototype.bind.call(console.error,console,g.name+":"),a.error.apply(console,arguments)},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=c||t,n=t-o,c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,100)},display:function(){var t=g.name+":",n=0;c=!1,clearTimeout(a.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")
}),console.groupEnd()),l=[]}},invoke:function(t,n,i){var s,c,l,u=C;return n=n||f,i=T||i,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[r])&&n!=s)u=u[r];else{if(u[r]!==o)return c=u[r],!1;if(!e.isPlainObject(u[i])||n==s)return u[i]!==o?(c=u[i],!1):(a.error(v.method,t),!1);u=u[i]}})),e.isFunction(c)?l=c.apply(i,n):c!==o&&(l=c),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),c}},d?(C===o&&a.initialize(),a.invoke(u)):(C!==o&&C.invoke("destroy"),a.initialize())}),r!==o?r:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",className:{fixed:"fixed"},debug:!1,verbose:!1,performance:!0,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,transition:!1,duration:500,onPassed:{},onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,once:!0,continuous:!1,onRefresh:function(){},onScroll:function(){},error:{method:"The method you called is not defined."}}}(jQuery,window,document);